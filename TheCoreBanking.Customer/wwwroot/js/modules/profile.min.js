function GetAllCustomFields(){var custom;response[0].caption1!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption1"><\/div><\/div>'+$("#CustomName").html(response[0].caption1),$("#InputField").html(custom));response[0].caption2!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption2"><\/div><\/div>'+$("#CustomName").html(response[0].caption2),$("#InputField").html(custom));response[0].caption3!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption3"><\/div><\/div>'+$("#CustomName").html(response[0].caption3),$("#InputField").html(custom));response[0].caption4!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption4"><\/div><\/div>'+$("#CustomName").html(response[0].caption4),$("#InputField").html(custom));response[0].caption5!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption5"><\/div><\/div>'+$("#CustomName").html(response[0].caption5),$("#InputField").html(custom));response[0].caption6!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption6"><\/div><\/div>'+$("#CustomName").html(response[0].caption6),$("#InputField").html(custom));response[0].caption7!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption7"><\/div><\/div>'+$("#CustomName").html(response[0].caption7),$("#InputField").html(custom));response[0].caption8!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption8"><\/div><\/div>'+$("#CustomName").html(response[0].caption8),$("#InputField").html(custom));response[0].caption9!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption9"><\/div><\/div>'+$("#CustomName").html(response[0].caption9),$("#InputField").html(custom));response[0].caption10!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption10"><\/div><\/div>'+$("#CustomName").html(response[0].caption10),$("#InputField").html(custom));response[0].caption11!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption11"><\/div><\/div>'+$("#CustomName").html(response[0].caption11),$("#InputField").html(custom));response[0].caption12!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption12"><\/div><\/div>'+$("#CustomName").html(response[0].caption12),$("#InputField").html(custom));response[0].caption13!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption13"><\/div><\/div>'+$("#CustomName").html(response[0].caption13),$("#InputField").html(custom));response[0].caption14!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption14"><\/div><\/div>'+$("#CustomName").html(response[0].caption14),$("#InputField").html(custom));response[0].caption15!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption15"><\/div><\/div>'+$("#CustomName").html(response[0].caption15),$("#InputField").html(custom));response[0].caption16!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption16"><\/div><\/div>'+$("#CustomName").html(response[0].caption16),$("#InputField").html(custom));response[0].caption17!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption17"><\/div><\/div>'+$("#CustomName").html(response[0].caption17),$("#InputField").html(custom));response[0].caption18!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption18"><\/div><\/div>'+$("#CustomName").html(response[0].caption18),$("#InputField").html(custom));response[0].caption19!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption19"><\/div><\/div>'+$("#CustomName").html(response[0].caption19),$("#InputField").html(custom));response[0].caption20!=null&&(custom='<div class="col-md-10"><div class="form-group"><input type="text" id="Caption20"><\/div><\/div>'+$("#CustomName").html(response[0].caption20),$("#InputField").html(custom))}function initDataTable(){$("#data-table").bootstrapTable("showLoading");$("#data-table").bootstrapTable({search:!0,searchAlign:"right",detailView:!0,detailFormatter:utilities.profileTableFormatter,url:url_path+"/Profile/LoadCustomers",showPaginationSwitch:!0,pagination:!0,mobileResponsive:!0,checkOnInit:!0,minWidth:626,toolbar:"#custom-toolbar",showRefresh:!0,showToggle:!0,uniqueId:"customerid",buttonsClass:"danger",columns:[{field:"surname",title:"Surname",sortable:!0},{field:"firstname",title:"Firstname",sortable:!0},{field:"customercode",title:"Customer Code",sortable:!0,align:"right"},{field:"customeraccounttype.name",title:"Account Type",sortable:!0},{field:null,align:"center",width:"5%",formatter:function(val,row){return["<div class='dropdown'>","<button class='btn btn-warning btn-icon' ","data-toggle='dropdown' type='button'>","<i class='now-ui-icons ui-2_settings-90'><\/i>","<\/button>","<div class='dropdown-menu dropdown-menu-right'>","<h6 class='dropdown-header'>Edit<\/h6>","<a class='dropdown-item'"," onclick='initUpdate("+row.customerid+")'>","Profile","<\/a>","<a class='dropdown-item' id='"+row.customerid+"' "," onclick='handleAddressUpdate(this)'>","Address","<\/a>","<a class='dropdown-item' id='"+row.customerid+"' "," onclick='handleEmailUpdate(this)'>","Email","<\/a>","<a class='dropdown-item' id='"+row.customerid+"' "," onclick='handlePhoneUpdate(this)'>","Phone","<\/a>","<\/div>","<\/div>"].join("")}},]})}function handleAddressUpdate(self){UpdateCustomer=$("#data-table").bootstrapTable("getRowByUniqueId",self.id);utilities.updateWizardHeader("#addressUpdateModal");$.ajax(url_path+"/Profile/LoadCustomerAddresses/"+self.id).then(function(response){$("#addressUpdateTable").bootstrapTable("load",response);$("#addressUpdateTable").bootstrapTable("hideLoading");$("#frmAddressUpdate").closest("div.row").hide();$("#addressUpdateTable").closest("div.row").show();$("#addressUpdateModal #title").text("Customer Address(es)");$("#addressUpdateModal").modal("show")})}function handleEmailUpdate(self){UpdateCustomer=$("#data-table").bootstrapTable("getRowByUniqueId",self.id);utilities.updateWizardHeader("#emailUpdateModal");$.ajax(url_path+"/Profile/LoadCustomerEmails/"+self.id).then(function(response){$("#emailUpdateTable").bootstrapTable("load",response);$("#emailUpdateTable").bootstrapTable("hideLoading");$("#frmEmailUpdate").closest("div.row").hide();$("#emailUpdateTable").closest("div.row").show();$("#emailUpdateModal #title").text("Customer E-mail(s)");$("#emailUpdateModal").modal("show")})}function handlePhoneUpdate(self){UpdateCustomer=$("#data-table").bootstrapTable("getRowByUniqueId",self.id);utilities.updateWizardHeader("#phoneUpdateModal");$.ajax(url_path+"/Profile/LoadCustomerPhones/"+self.id).then(function(response){$("#phoneUpdateTable").bootstrapTable("load",response);$("#phoneUpdateTable").bootstrapTable("hideLoading");$("#frmPhoneUpdate").closest("div.row").hide();$("#phoneUpdateTable").closest("div.row").show();$("#phoneUpdateModal #title").text("Customer Phone(s)");$("#phoneUpdateModal").modal("show")})}function initFormValidations(){jQuery.validator.setDefaults({onfocusout:!1,onkeyup:!1,onclick:!1,normalizer:function(value){return $.trim(value)},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})}});$("#wizardComponent #frmGeneral, #updateWizard #frmGeneral").each(function(){$(this).validate({rules:{Staffnumber:{maxlength:50}},messages:{Staffnumber:{required:"Staff number required if customer category is internal",maxlength:jQuery.validator.format("Staff number cannot exceed {0} characters")},Customersensitivitylevelid:{required:"Customer Sensitivity Level is required"},Institutiontypeid:{required:"Customer institution type is required"}}})});$("#wizardComponent #frmPersonalPrimary, #updateWizard #frmPersonalPrimary").each(function(){$(this).validate({rules:{Surname:{maxlength:200},Firstname:{maxlength:200},Othernames:{maxlength:200},Taxidnumber:{maxlength:50},Placeofbirth:{maxlength:200},Nationality:{maxlength:50},Hometown:{maxlength:100},Spousenamework:{maxlength:200},Foreignrpno:{maxlength:50},Spousephone:{digits:!0,maxlength:20},Spousemail:{email:!0,maxlength:100},Educationlevel:{maxlength:100},Firstchildname:{maxlength:200},Mothersmaidenname:{maxlength:100},phone1:{digits:!0,maxlength:50},phone2:{digits:!0,maxlength:50},email1:{email:!0,maxlength:200},email2:{email:!0,maxlength:200},address1:{maxlength:200},address2:{maxlength:200},City:{maxlength:50},Fax:{digits:!0,maxlength:20},Pobox:{maxlength:20},Idissueauthority:{maxlength:100},Idplaceofissue:{maxlength:100},Noksurname:{maxlength:200},Nokothernames:{maxlength:200},Nokemail:{email:!0,maxlength:100},Nokaddress:{maxlength:200},Nokphone:{digits:!0,maxlength:50},Bvn:{digits:!0,maxlength:20},Nokrelationship:{maxlength:50}},messages:{Surname:{required:"Surname is required",maxlength:jQuery.validator.format("Surname cannot exceed {0} characters")},Firstname:{required:"First name is required",maxlength:jQuery.validator.format("First name cannot exceed {0} characters")},Othernames:{maxlength:jQuery.validator.format("Other names cannot exceed {0} characters")},Taxidnumber:{maxlength:jQuery.validator.format("TIN cannot exceed {0} characters")},Dateofbirth:"Date of birth is required",Placeofbirth:{maxlength:jQuery.validator.format("Place of Birth cannot exceed {0} characters")},Genderid:"Gender is required",Nationality:{required:"Nationality is required",maxlength:jQuery.validator.format("Nationality cannot exceed {0} characters")},Hometown:{maxlength:jQuery.validator.format("Home town cannot exceed {0} characters")},Spousenamework:{maxlength:jQuery.validator.format("Spouse name/work cannot exceed {0} characters")},Foreignrpno:{maxlength:jQuery.validator.format("Foreign residential permit no. cannot exceed {0} characters")},Spousephone:{maxlength:jQuery.validator.format("Spouse's phone number cannot exceed {0} characters"),digits:"Spouse's phone number can contain only digits"},Spousemail:{email:"Spouse's email format is invalid",maxlength:jQuery.validator.format("Spouse's email cannot exceed {0} characters")},Educationlevel:{maxlength:jQuery.validator.format("Education level cannot exceed {0} characters")},Firstchildname:{maxlength:jQuery.validator.format("Name of first child cannot exceed {0} characters")},Mothersmaidenname:{maxlength:jQuery.validator.format("Mother's maiden name cannot exceed {0} characters")},phone1:{required:"Mobile phone number is required",digits:"Phone number(s) can only contain digits",maxlength:jQuery.validator.format("Mobile phone number cannot exceed {0} characters")},phone2:{digits:"Phone number(s) can only contain digits",maxlength:jQuery.validator.format("Home phone number cannot exceed {0} characters")},email1:{email:"E-mail 1 format not valid",maxlength:jQuery.validator.format("Email 1 cannot exceed {0} characters")},email2:{email:"E-mail 2 format not valid",maxlength:jQuery.validator.format("Email 2 cannot exceed {0} characters")},address1:{required:"Residential address is required",maxlength:jQuery.validator.format("Residential address cannot exceed {0} characters")},address2:{maxlength:jQuery.validator.format("Mailing address cannot exceed {0} characters")},City:{required:"City is required",maxlength:jQuery.validator.format("City cannot exceed {0} characters")},Fax:{digits:"Fax can contain only digits",maxlength:jQuery.validator.format("Fax cannot exceed {0} characters")},State:"State is required",Country:"Country is required",Modeofidentificationid:"Mode of identity is required",Pobox:{maxlength:jQuery.validator.format("P.O. Box cannot exceed {0} characters")},Idissueauthority:{maxlength:jQuery.validator.format("ID issue authority cannot exceed {0} characters")},Idplaceofissue:{maxlength:jQuery.validator.format("ID place of issue cannot exceed {0} characters")},Noksurname:{maxlength:jQuery.validator.format("Next of Kin's surname cannot exceed {0} characters")},Nokothernames:{maxlength:jQuery.validator.format("Next of Kin's other name cannot exceed {0} characters")},Nokemail:{email:"Next of Kin's email format is invalid",maxlength:jQuery.validator.format("Next of Kin's email cannot exceed {0} characters")},Nokaddress:{maxlength:jQuery.validator.format("Next of Kin's address cannot exceed {0} characters")},Nokphone:{digits:"Next of Kin's mobile phone can contain only digits",maxlength:jQuery.validator.format("Next of Kin's mobile phone cannot exceed {0} characters")},Bvn:{required:"BVN is required",digits:"BVN can contain only digits",maxlength:jQuery.validator.format("BVN cannot exceed {0} characters")},Nokrelationship:{maxlength:jQuery.validator.format("Next of Kin's relationship cannot exceed {0} characters")}},ignore:!1})});$("#wizardComponent #frmPersonalSecondary, #updateWizard #frmPersonalSecondary").each(function(){$(this).validate({rules:{Surname:{maxlength:200},Firstname:{maxlength:200},Othernames:{maxlength:200},Taxidnumber:{maxlength:50},Placeofbirth:{maxlength:200},Nationality:{maxlength:50},Hometown:{maxlength:100},Spousenamework:{maxlength:200},Foreignrpno:{maxlength:50},Spousephone:{digits:!0,maxlength:20},Spousemail:{email:!0,maxlength:100},Educationlevel:{maxlength:100},Firstchildname:{maxlength:200},Mothersmaidenname:{maxlength:100},phone1:{digits:!0,maxlength:50},phone2:{digits:!0,maxlength:50},email1:{email:!0,maxlength:200},email2:{email:!0,maxlength:200},address1:{maxlength:200},address2:{maxlength:200},City:{maxlength:50},Fax:{digits:!0,maxlength:20},Pobox:{maxlength:20},Idissueauthority:{maxlength:100},Idplaceofissue:{maxlength:100},Noksurname:{maxlength:200},Nokothernames:{maxlength:200},Nokemail:{email:!0,maxlength:100},Nokaddress:{maxlength:200},Nokphone:{digits:!0,maxlength:50},Bvn:{digits:!0,maxlength:20},Nokrelationship:{maxlength:50}},messages:{Surname:{required:"Joint name is required",maxlength:jQuery.validator.format("Joint name cannot exceed {0} characters")},Firstname:{required:"First name is required",maxlength:jQuery.validator.format("First name cannot exceed {0} characters")},Othernames:{maxlength:jQuery.validator.format("Other names cannot exceed {0} characters")},Taxidnumber:{maxlength:jQuery.validator.format("TIN cannot exceed {0} characters")},Dateofbirth:"Date of birth is required",Placeofbirth:{maxlength:jQuery.validator.format("Place of Birth cannot exceed {0} characters")},Genderid:"Gender is required",Nationality:{required:"Nationality is required",maxlength:jQuery.validator.format("Nationality cannot exceed {0} characters")},Hometown:{maxlength:jQuery.validator.format("Home town cannot exceed {0} characters")},Spousenamework:{maxlength:jQuery.validator.format("Spouse name/work cannot exceed {0} characters")},Foreignrpno:{maxlength:jQuery.validator.format("Foreign residential permit no. cannot exceed {0} characters")},Spousephone:{maxlength:jQuery.validator.format("Spouse's phone number cannot exceed {0} characters"),digits:"Spouse's phone number can contain only digits"},Spousemail:{email:"Spouse's email format is invalid",maxlength:jQuery.validator.format("Spouse's email cannot exceed {0} characters")},Educationlevel:{maxlength:jQuery.validator.format("Education level cannot exceed {0} characters")},Firstchildname:{maxlength:jQuery.validator.format("Name of first child cannot exceed {0} characters")},Mothersmaidenname:{maxlength:jQuery.validator.format("Mother's maiden name cannot exceed {0} characters")},phone1:{required:"Mobile phone number is required",digits:"Phone number(s) can only contain digits",maxlength:jQuery.validator.format("Mobile phone number cannot exceed {0} characters")},phone2:{digits:"Phone number(s) can only contain digits",maxlength:jQuery.validator.format("Home phone number cannot exceed {0} characters")},email1:{email:"E-mail 1 format not valid",maxlength:jQuery.validator.format("Email 1 cannot exceed {0} characters")},email2:{email:"E-mail 2 format not valid",maxlength:jQuery.validator.format("Email 2 cannot exceed {0} characters")},address1:{required:"Residential address is required",maxlength:jQuery.validator.format("Residential address cannot exceed {0} characters")},address2:{maxlength:jQuery.validator.format("Mailing address cannot exceed {0} characters")},City:{required:"City is required",maxlength:jQuery.validator.format("City cannot exceed {0} characters")},Fax:{digits:"Fax can contain only digits",maxlength:jQuery.validator.format("Fax cannot exceed {0} characters")},State:"State is required",Country:"Country is required",Modeofidentificationid:"Mode of identity is required",Pobox:{maxlength:jQuery.validator.format("P.O. Box cannot exceed {0} characters")},Idissueauthority:{maxlength:jQuery.validator.format("ID issue authority cannot exceed {0} characters")},Idplaceofissue:{maxlength:jQuery.validator.format("ID place of issue cannot exceed {0} characters")},Noksurname:{maxlength:jQuery.validator.format("Next of Kin's surname cannot exceed {0} characters")},Nokothernames:{maxlength:jQuery.validator.format("Next of Kin's other name cannot exceed {0} characters")},Nokemail:{email:"Next of Kin's email format is invalid",maxlength:jQuery.validator.format("Next of Kin's email cannot exceed {0} characters")},Nokaddress:{maxlength:jQuery.validator.format("Next of Kin's address cannot exceed {0} characters")},Nokphone:{digits:"Next of Kin's mobile phone can contain only digits",maxlength:jQuery.validator.format("Next of Kin's mobile phone cannot exceed {0} characters")},Bvn:{digits:"BVN can contain only digits",maxlength:jQuery.validator.format("BVN cannot exceed {0} characters")},Nokrelationship:{maxlength:jQuery.validator.format("Next of Kin's relationship cannot exceed {0} characters")}},ignore:!1})});$("#wizardComponent #frmOfficialPrimary, #updateWizard #frmOfficialPrimary").each(function(){$(this).validate({rules:{Occupation:{maxlength:100},Currentemployer:{maxlength:50},Workaddress:{maxlength:200},Workphone:{maxlength:50,digits:!0},Previousemployer:{maxlength:100}},messages:{Occupation:{maxlength:jQuery.validator.format("Occupation cannot exceed {0} characters")},Currentemployer:{maxlength:jQuery.validator.format("Current employer cannot exceed {0} characters")},Workaddress:{maxlength:jQuery.validator.format("Work address cannot exceed {0} characters")},Workphone:{digits:"Telephone can only contain digits",maxlength:jQuery.validator.format("Telephone cannot exceed {0} characters")},Previousemployer:{maxlength:jQuery.validator.format("Previous employer cannot exceed {0} characters")}}})});$("#wizardComponent #frmOfficialSecondary, #updateWizard #frmOfficialSecondary").each(function(){$(this).validate({rules:{Surname:{maxlength:200},Rcnumber:{maxlength:50},Taxidnumber:{maxlength:50},Natureofbusiness:{maxlength:200},address1:{maxlength:200},City:{maxlength:50},address2:{maxlength:200},address3:{maxlength:200},Scumlnumber:{maxlength:50},Fax:{maxlength:20,digits:!0},phone1:{maxlength:50,digits:!0},phone2:{maxlength:50,digits:!0},email1:{maxlength:200,email:!0},email2:{maxlength:200,email:!0},Businesswebsite:{url:!0,maxlength:100},Pobox:{maxlength:20},Namercrelatedcoys:{maxlength:200},Namercparentbody:{maxlength:200}},messages:{Surname:{required:"Company name is required",maxlength:jQuery.validator.format("Company name cannot exceed {0} characters")},Rcnumber:{required:"RC Number is required",maxlength:jQuery.validator.format("RC number cannot exceed {0} characters")},Businessstartdate:"Incorporation date is required",Taxidnumber:{required:"Tax identification number is required",maxlength:jQuery.validator.format("Tax identification no. cannot exceed {0} characters")},Natureofbusiness:{required:"Nature of business is required",maxlength:jQuery.validator.format("Nature of business cannot exceed {0} characters")},address1:{required:"Registered address is required",maxlength:jQuery.validator.format("Registered address cannot exceed {0} characters")},City:{required:"City is required",maxlength:jQuery.validator.format("City cannot exceed {0} characters")},address2:{maxlength:jQuery.validator.format("Business address 2 cannot exceed {0} characters")},address3:{maxlength:jQuery.validator.format("Mailing address cannot exceed {0} characters")},Scumlnumber:{maxlength:jQuery.validator.format("SCUML number cannot exceed {0} characters")},Fax:{digits:"Fax can contain only digits",maxlength:jQuery.validator.format("Fax cannot exceed {0} characters")},Country:"Country is required",State:"State is required",phone1:{required:"Transaction account phone number is required",digits:"Phone number(s) can only contain digits",maxlength:jQuery.validator.format("Transact. acct. phone number cannot exceed {0} characters")},phone2:{digits:"Phone number(s) can only contain digits",maxlength:jQuery.validator.format("Phone 2 cannot exceed {0} characters")},email1:{email:"E-mail format not valid",maxlength:jQuery.validator.format("Transact. acct. email cannot exceed {0} characters")},email2:{email:"E-mail format not valid",maxlength:jQuery.validator.format("Email 2 cannot exceed {0} characters")},Businesswebsite:{url:"Website format is invalid",maxlength:jQuery.validator.format("Business website cannot exceed {0} characters")},Pobox:{maxlength:jQuery.validator.format("P.O. box cannot exceed {0} characters")},Namercrelatedcoys:{maxlength:jQuery.validator.format("Name/RC No. of related coys cannot exceed {0} characters")},Namercparentbody:{maxlength:jQuery.validator.format("Name/RC No. of parent body cannot exceed {0} characters")}}})});$("#wizardComponent #frmBank, #updateWizard #frmBank").each(function(){$(this).validate({rules:{Bankaddress:{maxlength:200},Bankaccountnumber:{maxlength:100,digits:!0},Bvn:{maxlength:50,digits:!0}},messages:{Bankaddress:{maxlength:jQuery.validator.format("Bank address cannot exceed {0} characters")},Bankaccountnumber:{digits:"Account number can only contain digits",maxlength:jQuery.validator.format("Account no. cannot exceed {0} characters")},Bvn:{required:"BVN is required",digits:"BVN can only contain digits",maxlength:jQuery.validator.format("BVN cannot exceed {0} characters")}}})});$("#wizardComponent #frmKyc").validate();$("#frmAddressUpdate").validate({rules:{address:{maxlength:200},city:{maxlength:50}},messages:{address:{required:"Address is required",maxlength:jQuery.validator.format("Address cannot exceed {0} characters")},addresstypeid:{required:"Address type is required"},city:{required:"City is required",maxlength:jQuery.validator.format("City cannot exceed {0} characters")},stateid:{required:"State is required"},countryid:{required:"Country is required"}}});$("#frmPhoneUpdate").validate({rules:{phone:{maxlength:50,digits:!0}},messages:{phone:{required:"Phone number is required",maxlength:jQuery.validator.format("Phone number cannot exceed {0} characters"),digits:"Phone number can only contain digits"}}});$("#frmEmailUpdate").validate({rules:{email:{maxlength:200,email:!0}},messages:{required:"E-mail is required",email:"E-mail format is invalid",maxlength:jQuery.validator.format("E-mail cannot exceed {0} characters")}})}function showKYCUpload(uploadid){$("#kyc-preview-modal").find("img").attr("src",url_path+"/css/img/loading-sm.gif");$("#kyc-preview-modal").find("img").attr("src",url_path+"/Profile/LoadKYCDocument/"+uploadid);$("#kyc-preview-modal").find(".modal-title").text($("#kycupload-update-data-table").bootstrapTable("getRowByUniqueId",uploadid).title);$("#kyc-preview-modal").modal("show")}function openModal(e){var datefield,table_name;$("#wizardComponent").bootstrapWizard("resetWizard");CustomerType=e;switch(e.text.toLowerCase()){case"individual":case"minor":$("#wizardComponent").bootstrapWizard("hide",1);$("#wizardComponent").bootstrapWizard("hide",5);$("#wizardComponent").bootstrapWizard("display",0);$("#wizardComponent").bootstrapWizard("display",4);$("#wizardComponent #Institutiontypeid").attr("disabled","true");$("#wizardComponent .institution-hide").hide();datefield=$("#wizardComponent #frmPersonalPrimary input[name=Dateofbirth]");e.text.toLowerCase()=="minor"?(datefield.data("DateTimePicker").maxDate(moment()),datefield.data("DateTimePicker").minDate(moment().subtract(18,"years").add(1,"days"))):(datefield.data("DateTimePicker").minDate(!1),datefield.data("DateTimePicker").maxDate(moment().subtract(18,"years")));break;case"estate":case"joint":$("#wizardComponent").bootstrapWizard("show",1);$("#wizardComponent").bootstrapWizard("hide",0);$("#wizardComponent").bootstrapWizard("hide",4);$("#wizardComponent").bootstrapWizard("hide",5);$("#wizardComponent").bootstrapWizard("display",1);$("#wizardComponent #Institutiontypeid").removeAttr("disabled");$("#wizardComponent .institution-hide").show();break;case"unincorporated":case"corporate":$("#wizardComponent").bootstrapWizard("show",2);$("#wizardComponent").bootstrapWizard("hide",0);$("#wizardComponent").bootstrapWizard("hide",1);$("#wizardComponent").bootstrapWizard("hide",4);$("#wizardComponent").bootstrapWizard("display",5);$("#wizardComponent #Institutiontypeid").removeAttr("disabled");$("#wizardComponent .institution-hide").show()}$("#kyc #frmKyc table").addClass("d-none");table_name="#KYC"+e.text.substr(0,1).toUpperCase()+e.text.substr(1);$(table_name).hasClass("empty")||$(table_name).removeClass("d-none");$("#wizardComponent #createCustType").text(e.text);$("#wizardModal").modal("show");$("#updateWizard").removeClass("active").hide();$("#wizardComponent").addClass("active").show()}function initUpdate(customerid){var row,table_name;clear();$("#updateWizard").bootstrapWizard("resetWizard");row=$("#data-table").bootstrapTable("getRowByUniqueId",customerid);UpdateCustomer=row;utilities.updateWizardHeader("#updateWizard");$("#kycU #frmKyc table").addClass("d-none");table_name="#kycU #KYC"+UpdateCustomer.customeraccounttype.name;$(table_name).hasClass("empty")||$(table_name).removeClass("d-none");$.ajax(url_path+"/Profile/ListKYCUploads/"+customerid).then(function(response){$("#kycupload-update-data-table").bootstrapTable("load",response)});utilities.populateGeneral(UpdateCustomer);utilities.populateBank(UpdateCustomer);utilities.populateKYC(UpdateCustomer.tblCustomeraccountkycitem,table_name);switch(UpdateCustomer.customeraccounttype.name.toLowerCase()){case"individual":case"minor":$("#updateWizard").bootstrapWizard("hide",1);$("#updateWizard").bootstrapWizard("hide",5);$("#updateWizard").bootstrapWizard("display",0);$("#updateWizard").bootstrapWizard("display",4);$("#updateWizard #Institutiontypeid").attr("disabled","true");$("#updateWizard .institution-hide").hide();utilities.populatePersonal(row);utilities.populateOfficialPrimary(row);break;case"estate":case"joint":$("#updateWizard").bootstrapWizard("show",1);$("#updateWizard").bootstrapWizard("hide",0);$("#updateWizard").bootstrapWizard("hide",4);$("#updateWizard").bootstrapWizard("hide",5);$("#updateWizard").bootstrapWizard("display",1);$("#updateWizard #Institutiontypeid").removeAttr("disabled");$("#updateWizard .institution-hide").show();utilities.populatePersonal(row,!1);break;case"unincorporated":case"corporate":$("#updateWizard").bootstrapWizard("show",2);$("#updateWizard").bootstrapWizard("hide",0);$("#updateWizard").bootstrapWizard("hide",1);$("#updateWizard").bootstrapWizard("hide",4);$("#updateWizard").bootstrapWizard("display",5);$("#updateWizard #Institutiontypeid").removeAttr("disabled");$("#updateWizard .institution-hide").show();utilities.populateOfficialSecondary(row)}$("#wizardModal").modal("show");$("#wizardComponent").removeClass("active").hide();$("#updateWizard").addClass("active").show()}function prepareKYCTables(){var configs={},KYCItemActions={};$.when($.ajax(url_path+"/Profile/LoadKYCItems/individual").then(function(response){configs.individual=response}),$.ajax(url_path+"/Profile/LoadKYCItems/minor").then(function(response){configs.minor=response}),$.ajax(url_path+"/Profile/LoadKYCItems/corporate").then(function(response){configs.corporate=response}),$.ajax(url_path+"/Profile/LoadKYCItems/joint").then(function(response){configs.joint=response}),$.ajax(url_path+"/Profile/LoadKYCItems/estate").then(function(response){configs.estate=response}),$.ajax(url_path+"/Profile/LoadKYCItems/unincorporated").then(function(response){configs.unincorporated=response}),$.ajax(url_path+"/Profile/LoadKYCItemActions").then(function(response){KYCItemActions=response})).then(function(){$.each(configs,function(name,value){var create_table="#kyc #KYC"+name.substr(0,1).toUpperCase()+name.substr(1),update_table="#kycU #KYC"+name.substr(0,1).toUpperCase()+name.substr(1),table_name=create_table+", "+update_table,table_body;if(value.length==0){$(table_name).addClass("empty");return}table_body=$(create_table+" > tbody, "+update_table+" > tbody");$.each(value,function(index,val){var input="<div class='form-group mb-0'><input name='dt_"+val.id+"' type='text' style='visibility:hidden' id='dt_"+val.id+"' disabled data-msg-required='Date required if item is deferred' class='form-control KYCdatepicker' required /><\/div>",select="<select "+(val.mandatory?"required":"")+" data-msg-required='Item "+val.displayOrder+" requires a mandatory action' name='slt_"+val.id+"'><option><\/option><\/select>",table_row=$("<tr><\/tr>");table_row.append("<td>"+val.displayOrder+"<\/td>");table_row.append("<td>"+val.item+"<\/td>");table_row.append("<td class='text-center'>"+(val.mandatory?"Yes":"No")+"<\/td>");table_row.append("<td>"+select+"<\/td>");table_row.append("<td>"+input+"<\/td>");table_body.append(table_row)})});initDatePickerKYCFormat("#frmKyc .KYCdatepicker");$("#frmKyc select").select2({placeholder:"Select an action",data:KYCItemActions,allowClear:!0}).each(function(i,el){$(el).on("select2:select",function(opt){var date=$(this).closest("tr").find("input.KYCdatepicker");opt.params.data.text.toLowerCase()==="deferred"?($(date).removeAttr("disabled"),$(date).css("visibility","visible")):($(date).val(""),$(date).attr("disabled","true"),$(date).css("visibility","hidden"))}).on("select2:unselect",function(){var date=$(this).closest("tr").find("input.KYCdatepicker");$(date).val("");$(date).attr("disabled","true");$(date).css("visibility","hidden")})})},function(){throw new DOMException("Cannot resolve KYC items request!");})}function initDatePicker(selector){$(selector).length!=0&&$(selector).datetimepicker({format:"Do MMM YYYY",icons:{time:"now-ui-icons tech_watch-time",date:"now-ui-icons ui-1_calendar-60",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"now-ui-icons arrows-1_minimal-left",next:"now-ui-icons arrows-1_minimal-right",today:"fa fa-screenshot",clear:"fa fa-trash",close:"fa fa-remove"}})}function initDatePickerKYCFormat(selector){$(selector).length!=0&&$(selector).datetimepicker({format:"YYYY-MM-DD",icons:{time:"now-ui-icons tech_watch-time",date:"now-ui-icons ui-1_calendar-60",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"now-ui-icons arrows-1_minimal-left",next:"now-ui-icons arrows-1_minimal-right",today:"fa fa-screenshot",clear:"fa fa-trash",close:"fa fa-remove"}})}function save(form){var form_data,addressSource,data,kyc_uploads;form=$.map(form,function(arr){return arr});form=$.map(form,function(n){return $.trim(n.value).length!==0?n:null});form_data={};$.each(form,function(index,item){form_data[item.name]=item.value});form_data.Customercode="012345678";form_data.Customeraccounttypeid=CustomerType.id;var emails=[],phones=[],addresses=[],kyc_items=[];phones.push(utilities.makePhone(form_data.phone1));delete form_data.phone1;form_data.phone2&&(phones.push(utilities.makePhone(form_data.phone2)),delete form_data.phone2);form_data.email1&&(emails.push(utilities.makeEmail(form_data.email1)),delete form_data.email1);form_data.email2&&(emails.push(utilities.makeEmail(form_data.email2)),delete form_data.email2);addressSource=CustomerType.text.toLowerCase()!=="unincorporated"&&CustomerType.text.toLowerCase()!=="corporate";addressSource?(addresses.push(utilities.makeAddress(form_data,"Residential",form_data.address1)),form_data.address2&&addresses.push(utilities.makeAddress(form_data,"Mailing",form_data.address2))):(addresses.push(utilities.makeAddress(form_data,"Corporate",form_data.address1)),form_data.address2&&addresses.push(utilities.makeAddress(form_data,"Corporate",form_data.address2)),form_data.address3&&addresses.push(utilities.makeAddress(form_data,"Mailing",form_data.address3)));delete form_data.address1;delete form_data.address2;delete form_data.address3;form_data.Ispoliticallyexposed&&(form_data.Ispoliticallyexposed=!0);$.each(form_data,function(name,val){if(name.indexOf("slt_")>=0){var item_id=name.substr(4),date_option="dt_"+item_id,item={Kycitemid:item_id,Actionid:val};date_option in form_data?(item.Actiondate=form_data[date_option],delete form_data[date_option]):item.Actiondate=null;kyc_items.push(item);delete form_data[name]}});data={customer:form_data};emails.length!==0&&(data.Emails=emails);phones.length!==0&&(data.Phones=phones);addresses.length!==0&&(data.Addresses=addresses);kyc_items.length!==0&&(data.kyc=kyc_items);kyc_uploads=$("#kycupload-data-table").bootstrapTable("getData");kyc_uploads.length!==0&&(kyc_uploads=$.map(kyc_uploads,function(item){return item.document.append("title",item.title),item.document}));$.ajax(url_path+"/Profile/AddCustomer",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(response){function profileSuccess(){swal({title:"Save Customer",text:"Customer saved successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){clear();$("#data-table").bootstrapTable("refresh",{silent:!0});$("#wizardModal").modal("hide");$("#wizardComponent .btn-finish").removeAttr("disabled")})}if(kyc_uploads.length!==0){var kyc_requests=$.map(kyc_uploads,function(item){return $.ajax(url_path+"/Profile/AddKYCUpload/"+response,{method:"POST",contentType:!1,processData:!1,data:item})});$.when.apply($,kyc_requests).then(function(){profileSuccess()},function(){swal({title:"Save Customer",text:"Customer saved successfully but one or more kyc documents weren't submitted. View the customer's kyc status page for more details.",type:"warning",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){clear();$("#data-table").bootstrapTable("refresh",{silent:!0});$("#wizardModal").modal("hide");$("#wizardComponent .btn-finish").removeAttr("disabled")})})}else profileSuccess()},function(){swal({title:"Save Customer",text:"Customer submission encountered an error",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#wizardComponent .btn-finish").removeAttr("disabled")})})}function update(form){var form_data,data;var kycUpdateFrm=$("#kycU #frmKyc"),kycTable=kycUpdateFrm.find("table:not(.d-none)"),kycItems=kycTable.find("input, select").serializeArray();kycItems=$.map(kycItems,function(i){return $.trim(i.value).length==0&&(i.value=null),i});form=$.map(form,function(arr){return arr});form=$.map(form,function(n){return $.trim(n.value).length!==0?n:null});form_data={};$.each(form,function(index,item){form_data[item.name]=item.value});$.each(kycItems,function(index,item){form_data[item.name]=item.value});form_data.Customerid=UpdateCustomer.customerid;form_data.Customercode=UpdateCustomer.customercode;form_data.Customeraccounttypeid=UpdateCustomer.customeraccounttypeid;form_data.Ispoliticallyexposed=form_data.Ispoliticallyexposed?!0:!1;data={kyc:[]};$.each(form_data,function(name,val){if(name.indexOf("slt_")>=0){var item_id=name.substr(4),date_option="dt_"+item_id,item={Kycitemid:item_id,Actionid:val,Customerid:UpdateCustomer.customerid};date_option in form_data?(item.Actiondate=form_data[date_option],delete form_data[date_option]):item.Actiondate=null;data.kyc.push(item);delete form_data[name]}});data.customer=form_data;$.ajax(url_path+"/Profile/UpdateCustomer",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(){swal({title:"Update Customer",text:"Customer updated successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){clear();$("#data-table").bootstrapTable("refresh",{silent:!0});$("#wizardModal").modal("hide");$("#updateWizard .btn-finish").removeAttr("disabled")})},function(){swal({title:"Update Customer",text:"Customer update encountered an error",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$(".btn-finish").removeAttr("disabled")})})}function deleteKYCUpload(id){swal({title:"Are you sure?",text:"KYC document will be deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e4)})}}).then(function(){$.ajax(url_path+"/Profile/DeleteKYCUpload/"+id,{method:"POST",contentType:"application/json"}).then(function(response){swal({title:"Delete KYC Document",text:"Document deleted successfully!",type:"success"});$("#kycupload-update-data-table").bootstrapTable("load",response)},function(){swal({title:"Delete KYC Document",text:"KYC document deletion encountered an error!",type:"error"})})},function(){return})}function addKYCUpdateUpload(){var valid=!0,title,input;(title=$.trim($("#UpdateUploadTitle").val()),input=$("#UpdateUploadFile").get(0),title||(valid=!1,$.notify({icon:"now-ui-icons travel_info",message:"Please insert document title"},{type:"danger",placement:{from:"top",align:"right"}})),input.files.length||(valid=!1,$.notify({icon:"now-ui-icons travel_info",message:"Please choose a document"},{type:"danger",placement:{from:"top",align:"right"}})),valid)&&swal({title:"Are you sure?",text:"KYC document will be saved",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(){var formdata=new FormData;formdata.append("document",input.files[0]);formdata.append("title",title);$.ajax(url_path+"/Profile/AddKYCUpload/"+UpdateCustomer.customerid+"/?sendall=true",{method:"POST",contentType:!1,processData:!1,data:formdata}).then(function(response){$("#UpdateUploadTitle").val(null);$("#UpdateUploadFile").fileinput("clear");swal({title:"Add KYC Document",text:"KYC document added successfully!",type:"success"});$("#kycupload-update-data-table").bootstrapTable("load",response)},function(){swal({title:"Add KYC Document",text:"An error occured when adding KYC document!",type:"error"})})},function(){return})}function clear(){$(".wizard-container form select").val(null).trigger("select2:unselect").trigger("change");$(".wizard-container form").trigger("reset")}function initWizards(){function getTabForm(tab){var nav_id=$(tab).find("a.nav-link").attr("href"),wizard=$("#"+$(tab).closest(".card-wizard").attr("id")),tabpane=wizard.find("div"+nav_id+".tab-pane");return tabpane.find("form")}function refreshAnimation($wizard,index){$total=$wizard.find(".nav li").length;$li_width=100/$total;total_steps=$wizard.find(".nav li").length;move_distance=$wizard.width()/total_steps;index_temp=index;vertical_level=0;mobile_device=$(document).width()<600&&$total>3;mobile_device&&(move_distance=$wizard.width()/2,index_temp=index%2,$li_width=50);$wizard.find(".nav li").css("width",$li_width+"%");step_width=move_distance;move_distance=move_distance*index_temp;$current=index+1;mobile_device&&(vertical_level=parseInt(index/2),vertical_level=vertical_level*38)}$("#wizardComponent").bootstrapWizard({tabClass:"nav nav-pills",nextSelector:".btn-next",previousSelector:".btn-previous",finishSelector:".btn-finish",onNext:function(tab){var form=getTabForm(tab);return form.valid()?!0:!1},onInit:function(tab,navigation,index){var $wizard=navigation.closest(".card-wizard");refreshAnimation($wizard,index)},onFinish:function(tab,navigation){var form=getTabForm(tab),tabs,dateofBirth,weddingdate,dateofWeddingDate,Firstchilddob,Marriagecertificationdate,Idexpiry,Idissueauthority,Nokdob,tabsPersonalSecondary,Idexpiry2,Nokdob2,tabsOfficialPrimary,Employeddate,tabsOfficialSecondary,Businessstartdate,tabsBank,Bankaccountopeneddate;if(!form.valid())return!1;tabs=$("#wizardComponent #frmPersonalPrimary");dateofBirth=tabs.find("[name=Dateofbirth]").val();const formattedDateOfBirth=moment(dateofBirth,"Do MMM YYYY");dateofBirth!=""&&tabs.find("[name=Dateofbirth]").val(formattedDateOfBirth.format("YYYY-MM-DD"));weddingdate=tabs.find("[name=Weddingdate]").val();const formattedweddingDate=moment(weddingdate,"Do MMM YYYY");weddingdate!=""&&(tabs.find("[name=Weddingdate]").val(formattedweddingDate.format("YYYY-MM-DD")),dateofWeddingDate=tabs.find("[name=Weddingdate]").val(),console.log(dateofWeddingDate));Firstchilddob=tabs.find("[name=Firstchilddob]").val();const formattedFirstchilddob=moment(Firstchilddob,"Do MMM YYYY");Firstchilddob!=""&&tabs.find("[name=Firstchilddob]").val(formattedFirstchilddob.format("YYYY-MM-DD"));Marriagecertificationdate=tabs.find("[name=Marriagecertificationdate]").val();const formattedMarriagecertificationdate=moment(Marriagecertificationdate,"Do MMM YYYY");Marriagecertificationdate!=""&&tabs.find("[name=Marriagecertificationdate]").val(formattedMarriagecertificationdate.format("YYYY-MM-DD"));Idexpiry=tabs.find("[name=Idexpiry]").val();const formattedIdexpiry=moment(Idexpiry,"Do MMM YYYY");Idexpiry!=""&&tabs.find("[name=Idexpiry]").val(formattedIdexpiry.format("YYYY-MM-DD"));Idissueauthority=tabs.find("[name=Idissueauthority]").val();const formattedIdissueauthority=moment(Idissueauthority,"Do MMM YYYY");Idissueauthority!=""&&tabs.find("[name=Idissueauthority]").val(formattedIdissueauthority.format("YYYY-MM-DD"));Nokdob=tabs.find("[name=Nokdob]").val();const formattedNokdob=moment(Nokdob,"Do MMM YYYY");Nokdob!=""&&tabs.find("[name=Nokdob]").val(formattedNokdob.format("YYYY-MM-DD"));tabsPersonalSecondary=$("#wizardComponent #frmPersonalSecondary");Idexpiry2=tabsPersonalSecondary.find("[name=Idexpiry]").val();const formattedIdexpiry2=moment(Idexpiry2,"Do MMM YYYY");Idexpiry2!=""&&tabsPersonalSecondary.find("[name=Idexpiry]").val(formattedIdexpiry2.format("YYYY-MM-DD"));Nokdob2=tabsPersonalSecondary.find("[name=Nokdob]").val();const formattedNokdob2=moment(Nokdob2,"Do MMM YYYY");Nokdob2!=""&&tabsPersonalSecondary.find("[name=Nokdob]").val(formattedNokdob2.format("YYYY-MM-DD"));tabsOfficialPrimary=$("#wizardComponent #frmOfficialPrimary");Employeddate=tabsOfficialPrimary.find("[name=Employeddate]").val();const formattedEmployeddate=moment(Employeddate,"Do MMM YYYY");Employeddate!=""&&tabsOfficialPrimary.find("[name=Employeddate]").val(formattedEmployeddate.format("YYYY-MM-DD"));tabsOfficialSecondary=$("#wizardComponent #frmOfficialSecondary");Businessstartdate=tabsOfficialSecondary.find("[name=Businessstartdate]").val();const formattedBusinessstartdate=moment(Businessstartdate,"Do MMM YYYY");Businessstartdate!=""&&tabsOfficialSecondary.find("[name=Businessstartdate]").val(formattedBusinessstartdate.format("YYYY-MM-DD"));tabsBank=$("#wizardComponent #frmBank");Bankaccountopeneddate=tabsBank.find("[name=Bankaccountopeneddate]").val();const formattedBankaccountopeneddate=moment(Bankaccountopeneddate,"Do MMM YYYY");Bankaccountopeneddate!=""&&tabsBank.find("[name=Bankaccountopeneddate]").val(formattedBankaccountopeneddate.format("YYYY-MM-DD"));swal({title:"Are you sure?",text:"Customer will be submitted",type:"warning",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#wizardComponent .btn-finish").attr("disabled","true");var form_data=[],tabsArray=$(navigation).find("li:not(.d-none)").map(function(){return getTabForm(this)});tabsArray.each(function(){form_data.push(this.serializeArray())});save(form_data)}},function(){return})},onTabClick:function(){return!0},onTabShow:function(tab,navigation,index){var navLength=$(navigation).find("li:visible").length,wizard=navigation.closest(".card-wizard");wizard.find(".btn-next").removeClass("disabled");index+1==navLength&&index!==-1?($(wizard).find(".btn-next").hide(),$(wizard).find(".btn-finish").show()):($(wizard).find(".btn-next").show(),$(wizard).find(".btn-finish").hide());refreshAnimation(wizard,index)}});$("#updateWizard").bootstrapWizard({tabClass:"nav nav-pills",nextSelector:".btn-next",previousSelector:".btn-previous",finishSelector:".btn-finish",onNext:function(tab){var form=getTabForm(tab);return form.valid()?!0:!1},onInit:function(tab,navigation,index){var $wizard=navigation.closest(".card-wizard");refreshAnimation($wizard,index)},onFinish:function(tab,navigation){var weddingdate,Firstchilddob,Marriagecertificationdate,Idexpiry,Idissueauthority,Nokdob,dateofNokdob,tabsPersonalSecondary,Idexpiry2,Nokdob2,tabsOfficialPrimary,Employeddate,tabsOfficialSecondary,Businessstartdate,tabsBank,Bankaccountopeneddate;var form=getTabForm(tab),tabs=$("#updateWizard #frmPersonalPrimary"),dateofBirth=tabs.find("[name=Dateofbirth]").val();const formattedDateOfBirth=moment(dateofBirth,"Do MMM YYYY");dateofBirth!=""&&tabs.find("[name=Dateofbirth]").val(formattedDateOfBirth.format("YYYY-MM-DD"));weddingdate=tabs.find("[name=Weddingdate]").val();const formattedweddingDate=moment(weddingdate,"Do MMM YYYY");weddingdate!=""&&tabs.find("[name=Weddingdate]").val(formattedweddingDate.format("YYYY-MM-DD"));Firstchilddob=tabs.find("[name=Firstchilddob]").val();const formattedFirstchilddob=moment(Firstchilddob,"Do MMM YYYY");Firstchilddob!=""&&tabs.find("[name=Firstchilddob]").val(formattedFirstchilddob.format("YYYY-MM-DD"));Marriagecertificationdate=tabs.find("[name=Marriagecertificationdate]").val();const formattedMarriagecertificationdate=moment(Marriagecertificationdate,"Do MMM YYYY");Marriagecertificationdate!=""&&tabs.find("[name=Marriagecertificationdate]").val(formattedMarriagecertificationdate.format("YYYY-MM-DD"));Idexpiry=tabs.find("[name=Idexpiry]").val();const formattedIdexpiry=moment(Idexpiry,"Do MMM YYYY");Idexpiry!=""&&tabs.find("[name=Idexpiry]").val(formattedIdexpiry.format("YYYY-MM-DD"));Idissueauthority=tabs.find("[name=Idissueauthority]").val();const formattedIdissueauthority=moment(Idissueauthority,"Do MMM YYYY");Idissueauthority!=""&&tabs.find("[name=Idissueauthority]").val(formattedIdissueauthority.format("YYYY-MM-DD"));Nokdob=tabs.find("[name=Nokdob]").val();const formattedNokdob=moment(Nokdob,"Do MMM YYYY");Nokdob!=""&&(tabs.find("[name=Nokdob]").val(formattedNokdob.format("YYYY-MM-DD")),dateofNokdob=tabs.find("[name=Nokdob]").val(),console.log(dateofNokdob));tabsPersonalSecondary=$("#updateWizard #frmPersonalSecondary");Idexpiry2=tabsPersonalSecondary.find("[name=Idexpiry]").val();const formattedIdexpiry2=moment(Idexpiry2,"Do MMM YYYY");Idexpiry2!=""&&tabsPersonalSecondary.find("[name=Idexpiry]").val(formattedIdexpiry2.format("YYYY-MM-DD"));Nokdob2=tabsPersonalSecondary.find("[name=Nokdob]").val();const formattedNokdob2=moment(Nokdob2,"Do MMM YYYY");Nokdob2!=""&&tabsPersonalSecondary.find("[name=Nokdob]").val(formattedNokdob2.format("YYYY-MM-DD"));tabsOfficialPrimary=$("#updateWizard #frmOfficialPrimary");Employeddate=tabsOfficialPrimary.find("[name=Employeddate]").val();const formattedEmployeddate=moment(Employeddate,"Do MMM YYYY");Employeddate!=""&&tabsOfficialPrimary.find("[name=Employeddate]").val(formattedEmployeddate.format("YYYY-MM-DD"));tabsOfficialSecondary=$("#updateWizard #frmOfficialSecondary");Businessstartdate=tabsOfficialSecondary.find("[name=Businessstartdate]").val();const formattedBusinessstartdate=moment(Businessstartdate,"Do MMM YYYY");Businessstartdate!=""&&tabsOfficialSecondary.find("[name=Businessstartdate]").val(formattedBusinessstartdate.format("YYYY-MM-DD"));tabsBank=$("#updateWizard #frmBank");Bankaccountopeneddate=tabsBank.find("[name=Bankaccountopeneddate]").val();const formattedBankaccountopeneddate=moment(Bankaccountopeneddate,"Do MMM YYYY");if(Bankaccountopeneddate!=""&&tabsBank.find("[name=Bankaccountopeneddate]").val(formattedBankaccountopeneddate.format("YYYY-MM-DD")),!form.valid())return!1;swal({title:"Are you sure?",text:"Customer will be updated",type:"warning",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#updateWizard .btn-finish").attr("disabled","true");var form_data=[],tabsArray=$(navigation).find("li:not(.d-none)").map(function(){return $(this).hasClass("kyc")?null:getTabForm(this)});tabsArray.each(function(){form_data.push(this.serializeArray())});update(form_data)}},function(){return})},onTabClick:function(){return!0},onTabShow:function(tab,navigation,index){var navLength=$(navigation).find("li:visible").length,wizard=navigation.closest(".card-wizard");wizard.find(".btn-next").removeClass("disabled");index+1==navLength&&index!==-1?($(wizard).find(".btn-next").hide(),$(wizard).find(".btn-finish").show()):($(wizard).find(".btn-next").show(),$(wizard).find(".btn-finish").hide());refreshAnimation(wizard,index)}});$(window).resize(function(){$(".card-wizard").each(function(){$wizard=$(this);index=$wizard.bootstrapWizard("currentIndex");refreshAnimation($wizard,index)})})}function initSelectTwoConfig(){$.fn.select2.defaults.set("theme","bootstrap4");$.fn.select2.defaults.set("dropdownParent",$(".modal").first());$.fn.select2.defaults.set("width","100%");$.fn.select2.defaults.set("allowClear",!0);$("#ddlCategoryType, #UddlCategoryType").select2({placeholder:"Select customer category"});var stateLGA=[],sectorIndustries=[];$.ajax(url_path+"/Profile/LoadAddressTypes").then(function(response){AddressTypes=response;$("#ddlAddType").select2({placeholder:"Select address type",dropdownParent:$("#addressUpdateModal.modal"),data:response})});$.ajax(url_path+"/Profile/LoadRegions").then(function(response){$("#Regionid, #URegionid").select2({placeholder:"Select region",data:response})});$.ajax(url_path+"/Profile/LoadSectors").then(function(response){$("#Sectorid, #USectorid").select2({placeholder:"Select sector",data:response})});$.ajax(url_path+"/Profile/LoadTitles").then(function(response){$("#Titleid, #UTitleid").select2({placeholder:"Select title",data:response})});$.ajax(url_path+"/Profile/LoadSensitivityLevels").then(function(response){$("#ddlSensitivityLevel, #UddlSensitivityLevel").select2({placeholder:"Select sensitivity level",data:response})});$.ajax(url_path+"/Profile/LoadMaritalStatuses").then(function(response){$("#Maritalstatusid, #UMaritalstatusid").select2({placeholder:"Select status",data:response})});$.ajax(url_path+"/Profile/LoadGenders").then(function(response){$("#Genderid, #UGenderid, #Nokgenderid, #UNokgenderid, #sNOKGender, #UsNOKGender").select2({placeholder:"Select gender",data:response})});$.ajax(url_path+"/Profile/LoadStates").then(function(response){$("#ddlState, #UddlState, #Stateoforiginid, #UStateoforiginid, #sDdlState, #UsDdlState, #ssDdlState, #UssDdlState, #Workstate, #UWorkstate").select2({placeholder:"Select state",data:response});$("#ddlAddState").select2({placeholder:"Select state",dropdownParent:$("#addressUpdateModal.modal"),data:response})});$.ajax(url_path+"/Profile/LoadModeOfIDs").then(function(response){$("#Modeofidentification, #UModeofidentification, #sDdlModeOfID, #UsDdlModeOfID").select2({placeholder:"Select ID type",data:response})});$.ajax(url_path+"/Profile/LoadCountries").then(function(response){$("#ddlCountry, #UddlCountry, #sDdlCountry, #UsDdlCountry, #Workcountry, #UWorkcountry, #ssDdlCountry, #UssDdlCountry").select2({placeholder:"Select country",data:response});$("#ddlAddCountry").select2({placeholder:"Select country",dropdownParent:$("#addressUpdateModal.modal"),data:response})});$.ajax(url_path+"/Profile/LoadAnnualIncomes/individual").then(function(response){$("#Annualincome, #UAnnualincome").select2({placeholder:"Select income type",data:response})});$.ajax(url_path+"/Profile/LoadAnnualIncomes/business").then(function(response){$("#ssDdlAnnTurnover, #UssDdlAnnTurnover").select2({placeholder:"Select turnover amount",data:response})});$.ajax(url_path+"/Profile/LoadBusinessCategories").then(function(response){$("#Businesscategoryid, #UBusinesscategoryid").select2({placeholder:"Select business category",data:response})});$.ajax(url_path+"/Profile/LoadFundSources").then(function(response){$("#Sourceoffundid, #USourceoffundid, #sDdlFundSource, #UsDdlFundSource").select2({placeholder:"Select funds source",data:response})});$.ajax(url_path+"/Profile/LoadBanks").then(function(response){$("#Bankid, #UBankid").select2({placeholder:"Select bank",data:response})});$.ajax(url_path+"/Profile/LoadBankAccountTypes").then(function(response){$("#Bankaccountypeid, #UBankaccountypeid").select2({placeholder:"Select account type",data:response})});$.ajax(url_path+"/Profile/LoadEmploymentTypes").then(function(response){$("#Employmentstatus, #UEmploymentstatus").select2({placeholder:"Select employment status",data:response})});$.ajax(url_path+"/Profile/LoadLGAs").then(function(response){LGAs=response;$("#Stateoriginlgaid, #UStateoriginlgaid").select2({placeholder:"Select LGA"})});$.ajax(url_path+"/Profile/LoadIndustries").then(function(response){Industries=response;$("#Industryid, #UIndustryid").select2({placeholder:"Select industry"})});$.ajax(url_path+"/Profile/LoadInstitutionTypes").then(function(response){$("#Institutiontypeid, #UInstitutiontypeid").select2({placeholder:"Select institution type",data:response,width:"100%"})});$(document).on("select2:open",function(){$(".select2-results__options").perfectScrollbar()});$("#Stateoforiginid").on("select2:select",function(e){$("#Stateoriginlgaid").removeAttr("disabled");stateLGA=LGAs.filter(function(elem){return elem.state==e.params.data.text});stateLGA=stateLGA.map(function(elem){return{id:elem.id,text:elem.lga}});stateLGA.unshift({id:"",text:""});$("#Stateoriginlgaid").select2("destroy").empty().select2({placeholder:"Select LGA",width:"100%",data:stateLGA})});$("#Stateoforiginid").on("select2:unselect",function(){$("#Stateoriginlgaid").val(null).trigger("change");$("#Stateoriginlgaid").attr("disabled","true")});$("#Sectorid").on("select2:select",function(e){$("#Industryid").removeAttr("disabled");sectorIndustries=Industries.filter(function(elem){return elem.sectorid==e.params.data.id});sectorIndustries=sectorIndustries.map(function(elem){return{id:elem.industryid,text:elem.name}});sectorIndustries.unshift({id:"",text:""});$("#Industryid").select2("destroy").empty().select2({placeholder:"Select industry",width:"100%",data:sectorIndustries})});$("#Sectorid").on("select2:unselect",function(){$("#Industryid").val(null).trigger("change");$("#Industryid").attr("disabled","true")});$("#ddlCategoryType").on("select2:select",function(e){e.params.data.id=="internal"?$("#Staffnumber").removeAttr("disabled"):($("#Staffnumber").val(""),$("#Staffnumber").attr("disabled","true"),$("#Staffnumber").siblings("label").remove(),$("#Staffnumber").closest(".has-danger").removeClass("has-danger"),$("#Staffnumber").closest(".has-success").removeClass("has-success"))});$("#ddlCategoryType").on("select2:unselect",function(){$("#Staffnumber").val("");$("#Staffnumber").attr("disabled","true")});$("#UStateoforiginid").on("select2:select",function(e){$("#UStateoriginlgaid").removeAttr("disabled");stateLGA=LGAs.filter(function(elem){return elem.state==e.params.data.text});stateLGA=stateLGA.map(function(elem){return{id:elem.id,text:elem.lga}});stateLGA.unshift({id:"",text:""});$("#UStateoriginlgaid").select2("destroy").empty().select2({placeholder:"Select LGA",width:"100%",data:stateLGA})});$("#UStateoforiginid").on("select2:unselect",function(){$("#UStateoriginlgaid").val(null).trigger("change");$("#UStateoriginlgaid").attr("disabled","true")});$("#USectorid").on("select2:select",function(e){$("#UIndustryid").removeAttr("disabled");sectorIndustries=Industries.filter(function(elem){return elem.sectorid==e.params.data.id});sectorIndustries=sectorIndustries.map(function(elem){return{id:elem.industryid,text:elem.name}});sectorIndustries.unshift({id:"",text:""});$("#UIndustryid").select2("destroy").empty().select2({placeholder:"Select industry",width:"100%",data:sectorIndustries})});$("#USectorid").on("select2:unselect",function(){$("#UIndustryid").val(null).trigger("change");$("#UIndustryid").attr("disabled","true")});$("#updateWizard #UddlCategoryType").on("select2:select",function(e){e.params.data.id=="internal"?$("#updateWizard #UStaffnumber").removeAttr("disabled"):($("#updateWizard #UStaffnumber").val(""),$("#updateWizard #UStaffnumber").attr("disabled","true"),$("#updateWizard #UStaffnumber").siblings("label").remove(),$("#updateWizard #UStaffnumber").closest(".has-danger").removeClass("has-danger"),$("#updateWizard #UStaffnumber").closest(".has-success").removeClass("has-success"))});$("#updateWizard #UddlCategoryType").on("select2:unselect",function(){$("#updateWizard #UStaffnumber").val("");$("#updateWizard #UStaffnumber").attr("disabled","true")})}var url_path,utilities;$(document).ready(function(){$.ajax({url:"../Profile/lstCustomFields",type:"GET",success:function(response){response!=""&&($("#InputField").empty(),$.each(response,function(index,value){response[0].caption1!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption1+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption2!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption2+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption3!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption3+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption4!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption4+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption5!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption5+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption6!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption6+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption7!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption7+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption8!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption8+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption9!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption9+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption10!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption10+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption11!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption11+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption12!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption12+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption13!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption13+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption14!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption14+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption15!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption15+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption16!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption16+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption17!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption17+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption18!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption18+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption19!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption19+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>");response[0].caption20!=null&&$("#InputField").append("<label id='CustomName1'>"+value.caption20+"<\/label><li><input type='text' class='form-control' id='Caption'><\/li>")}))}})});url_path=window.location.pathname;url_path.charAt(url_path.length-1)=="/"&&(url_path=url_path.slice(0,url_path.length-1));var CustomerType,UpdateCustomer,AddressTypes,LGAs=[],Industries=[],tracker=0;$(document).ready(function(){initDataTable();initSelectTwoConfig();initDatePicker(".datepicker");initFormValidations();initWizards();$(".modal").perfectScrollbar();prepareKYCTables()});utilities={animDuration:400,profileTableFormatter:function(index,row,detail){detail.html("Loading...");var addresses=[],bvn,phones=[],emails=[];bvn=row.bvn;$.when($.ajax(url_path+"/Profile/LoadCustomerAddresses/"+row.customerid).then(function(response){addresses=response}),$.ajax(url_path+"/Profile/LoadCustomerEmails/"+row.customerid).then(function(response){emails=response}),$.ajax(url_path+"/Profile/LoadCustomerPhones/"+row.customerid).then(function(response){phones=response})).then(function(){var top_row=$("<div class='row'><\/div>"),bottom_row=$("<div class='row'><\/div>"),bvn_col=$("<div class='col-sm-12 col-md-6'><\/div>"),phone_col=$("<div class='col-sm-12 col-md-6'><\/div>"),email_col=$("<div class='col-sm-12 col-md-6'><\/div>"),address_col=$("<div class='col'><\/div>");address_col.append("<h6 class='detail-primary d-inline-block mb-3'>Address(es)<\/h6>");addresses.length==0?address_col.append("<p>No address record.<\/p>"):$.each(addresses,function(index,value){var html=[];html.push("<p><b>"+value.addresstype.addressTypeName+" Address: <\/b>");html.push(value.address+", "+value.city+", "+value.state.statename);html.push(", "+value.country.name+".<\/p>");address_col.append(html.join(""))});phone_col.append("<h6 class='detail-primary d-inline-block mb-3'>PHONE<\/h6>");phones.length==0?phone_col.append("<p>No phone record.<\/p>"):$.each(phones,function(index,value){phone_col.append("<p><b>Phone<\/b>: "+value.phone+"<\/p>")});email_col.append("<h6 class='detail-primary d-inline-block mb-3'>E-mail(s)<\/h6>");emails.length==0?email_col.append("<p>No e-mail record.<\/p>"):$.each(emails,function(index,value){email_col.append("<p><b>E-mail<\/b>: "+value.email+"<\/p>")});bvn_col.append("<h6 class='detail-primary d-inline-block mb-3'>BVN<\/h6>");bvn==null?bvn_col.append("<p>No BVN record.<\/p>"):bvn_col.append("<p><b>BVN<\/b>: "+bvn+"<\/p>");top_row.append(bvn_col,phone_col,email_col);bottom_row.append(address_col);detail.empty();detail.append(top_row,bottom_row)})},updateWizardHeader:function(container){$(container+" .headerCustDetails").text(UpdateCustomer.surname+" "+(UpdateCustomer.firstname?UpdateCustomer.firstname:"")+" - "+UpdateCustomer.customercode)},addKYCUpload:function(){var valid=!0,title=$.trim($("#uploadTitle").val()),input=$("#uploadFile").get(0),formdata;(title||(valid=!1,$.notify({icon:"now-ui-icons travel_info",message:"Please insert document title"},{type:"danger",placement:{from:"top",align:"right"}})),input.files.length||(valid=!1,$.notify({icon:"now-ui-icons travel_info",message:"Please choose a document"},{type:"danger",placement:{from:"top",align:"right"}})),valid)&&(formdata=new FormData,formdata.append("document",input.files[0]),$("#kycupload-data-table").bootstrapTable("append",{tracker:++tracker,title:title,document:formdata}),$("#uploadTitle").val(null),$("#uploadFile").fileinput("clear"))},removeKYCUpload:function(tracker){$("#kycupload-data-table").bootstrapTable("remove",{field:"tracker",values:[tracker]})},makeAddress:function(form_data,address_type,address){return{City:form_data.City,Stateid:form_data.State,Countryid:form_data.Country,Addresstypeid:$.grep(AddressTypes,function(el){return el.text==address_type})[0].id,Address:address,Active:!0}},makePhone:function(phone){return{Phone:phone,Active:!0}},makeEmail:function(email){return{Email:email,Active:!0}},populateGeneral:function(row_data){var tab=$("#updateWizard #frmGeneral"),sectorIndustries;tab.find("[name=Creditrating]").val(row_data.creditrating);row_data.sectorid&&(tab.find("[name=Sectorid]").val(row_data.sectorid).change(),tab.find("[name=Industryid]").removeAttr("disabled"),sectorIndustries=Industries.filter(function(elem){return elem.sectorid==row_data.sectorid}),sectorIndustries=sectorIndustries.map(function(elem){return{id:elem.industryid,text:elem.name}}),sectorIndustries.unshift({id:"",text:""}),tab.find("[name=Industryid]").select2("destroy").empty().select2({placeholder:"Select industry",width:"100%",data:sectorIndustries}));row_data.industryid&&tab.find("[name=Industryid]").val(row_data.industryid).change();tab.find("[name=Regionid]").val(row_data.regionid).change();tab.find("[name=Ispoliticallyexposed]").prop("checked",row_data.ispoliticallyexposed);row_data.staffnumber?(tab.find("[name=Staffnumber]").removeAttr("disabled").val(row_data.staffnumber),tab.find("#UddlCategoryType").val("internal").change()):(tab.find("[name=Staffnumber]").attr("disabled","true").val(null),tab.find("#UddlCategoryType").val("external").change());row_data.institutiontypeid&&tab.find("[name=Institutiontypeid]").val(row_data.institutiontypeid).change();row_data.customersensitivitylevelid&&tab.find("[name=Customersensitivitylevelid]").val(row_data.customersensitivitylevelid).change()},populatePersonal:function(row_data,primary=true){var form=primary?"#frmPersonalPrimary":"#frmPersonalSecondary",tab=$("#updateWizard "+form),m,stateLGA;if(primary){tab.find("[name=Titleid]").val(row_data.titleid).change();tab.find("[name=Surname]").val(row_data.surname);tab.find("[name=Firstname]").val(row_data.firstname);tab.find("[name=Othernames]").val(row_data.othernames);tab.find("[name=Taxidnumber ]").val(row_data.taxidnumber);tab.find("[name=Bvn ]").val(row_data.bvn);m=moment("2013-03-01","YYYY-MM-DD");const formattedDateOfBirth=moment(row_data.dateofbirth,"YYYY-MM-DD");if(row_data.dateofbirth&&tab.find("[name=Dateofbirth]").val(formattedDateOfBirth.format("Do MMM YYYY")),tab.find("[name=Placeofbirth]").val(row_data.placeofbirth),tab.find("[name=Maritalstatusid]").val(row_data.maritalstatusid).change(),tab.find("[name=Genderid]").val(row_data.genderid).change(),tab.find("[name=Nationality]").val(row_data.nationality),row_data.stateoforiginid&&(tab.find("[name=Stateoforiginid]").val(row_data.stateoforiginid).change(),tab.find("[name=Stateoriginlgaid]").removeAttr("disabled"),stateLGA=LGAs.filter(function(elem){return elem.state==tab.find("[name=Stateoforiginid] option:selected").text()}),stateLGA=stateLGA.map(function(elem){return{id:elem.id,text:elem.lga}}),stateLGA.unshift({id:"",text:""}),tab.find("[name=Stateoriginlgaid]").select2("destroy").empty().select2({placeholder:"Select LGA",width:"100%",data:stateLGA})),row_data.weddingdate){const formattedWeddingDate=moment(row_data.weddingdate,"YYYY-MM-DD");tab.find("[name=Weddingdate]").val(formattedWeddingDate.format("Do MMM YYYY"))}if(row_data.stateoriginlgaid&&tab.find("[name=Stateoriginlgaid]").val(row_data.stateoriginlgaid).change(),tab.find("[name=Hometown]").val(row_data.hometown),tab.find("[name=Spousenamework]").val(row_data.spousenamework),tab.find("[name=Foreignrpno]").val(row_data.foreignrpno),tab.find("[name=Spousephone]").val(row_data.spousephone),tab.find("[name=Spousemail]").val(row_data.spousemail),tab.find("[name=Educationlevel]").val(row_data.educationlevel),tab.find("[name=Firstchildname]").val(row_data.firstchildname),tab.find("[name=Mothersmaidenname]").val(row_data.mothersmaidenname),row_data.firstchilddob){const formattedFirstChildDOB=moment(row_data.firstchilddob,"YYYY-MM-DD");tab.find("[name=Firstchilddob]").val(formattedFirstChildDOB.format("Do MMM YYYY"))}if(row_data.marriagecertificationdate){const formattedMarriageCertificateDate=moment(row_data.marriagecertificationdate,"YYYY-MM-DD");tab.find("[name=Marriagecertificationdate]").val(formattedMarriageCertificateDate.format("Do MMM YYYY"))}}else tab.find("[name=Surname]").val(row_data.surname);if(tab.find("[name=Fax]").val(row_data.fax),tab.find("[name=Pobox]").val(row_data.pobox),tab.find("[name=Firstchildname]").val(row_data.firstchildname),tab.find("[name=Modeofidentificationid]").val(row_data.modeofidentificationid).change(),row_data.idexpiry){const formattedidexpiry=moment(row_data.idexpiry,"YYYY-MM-DD");tab.find("[name=Idexpiry]").val(formattedidexpiry.format("Do MMM YYYY"))}if(tab.find("[name=Idissueauthority]").val(row_data.idissueauthority),tab.find("[name=Idplaceofissue]").val(row_data.idplaceofissue),tab.find("[name=Sourceoffundid]").val(row_data.sourceoffundid).change(),tab.find("[name=Noksurname]").val(row_data.noksurname),tab.find("[name=Nokothernames]").val(row_data.nokothernames),row_data.nokdob){const formattedNok=moment(row_data.nokdob,"YYYY-MM-DD");tab.find("[name=Nokdob]").val(formattedNok.format("Do MMM YYYY"))}tab.find("[name=Nokemail]").val(row_data.nokemail);tab.find("[name=Nokaddress]").val(row_data.nokaddress);tab.find("[name=Nokphone]").val(row_data.nokphone);tab.find("[name=Nokrelationship]").val(row_data.nokrelationship);tab.find("[name=Nokgenderid]").val(row_data.nokgenderid).change()},populateOfficialPrimary:function(row_data){var tab=$("#updateWizard #frmOfficialPrimary");if(tab.find("[name=Employmentstatus]").val(row_data.employmentstatus).change(),tab.find("[name=Occupation]").val(row_data.occupation),tab.find("[name=Currentemployer]").val(row_data.currentemployer),tab.find("[name=Workaddress]").val(row_data.workaddress),tab.find("[name=Workphone]").val(row_data.workphone),tab.find("[name=Workstate]").val(row_data.workstate).change(),tab.find("[name=Workcountry]").val(row_data.workcountry).change(),row_data.employeddate){const formattedemployeddate=moment(row_data.employeddate,"YYYY-MM-DD");tab.find("[name=Employeddate]").val(formattedemployeddate.format("Do MMM YYYY"))}tab.find("[name=Previousemployer]").val(row_data.previousemployer);tab.find("[name=Annualincomeid]").val(row_data.annualincomeid).change()},populateOfficialSecondary:function(row_data){var tab=$("#updateWizard #frmOfficialSecondary");if(tab.find("[name=Surname]").val(row_data.surname),tab.find("[name=Rcnumber]").val(row_data.rcnumber),tab.find("[name=Businesscategoryid]").val(row_data.businesscategoryid).change(),row_data.businessstartdate){const formattedbusinessstartdate=moment(row_data.businessstartdate,"YYYY-MM-DD");tab.find("[name=Businessstartdate]").val(formattedbusinessstartdate.format("Do MMM YYYY"))}tab.find("[name=Taxidnumber]").val(row_data.taxidnumber);tab.find("[name=Natureofbusiness]").val(row_data.natureofbusiness);tab.find("[name=Scumlnumber]").val(row_data.scumlnumber);tab.find("[name=Fax]").val(row_data.fax);tab.find("[name=Businesswebsite]").val(row_data.businesswebsite);tab.find("[name=Pobox]").val(row_data.pobox);tab.find("[name=Annualincomeid]").val(row_data.annualincomeid).change();tab.find("[name=Namercrelatedcoys]").val(row_data.namercrelatedcoys);tab.find("[name=Namercparentbody]").val(row_data.namercparentbody)},populateBank:function(row_data){var tab=$("#updateWizard #frmBank");if(tab.find("[name=Bankid]").val(row_data.bankid).change(),tab.find("[name=Bankaddress]").val(row_data.bankaddress),tab.find("[name=Bankaccountypeid]").val(row_data.bankaccountypeid).change(),tab.find("[name=Bankaccountnumber]").val(row_data.bankaccountnumber),row_data.bankaccountopeneddate){const formattedbankaccountopeneddate=moment(row_data.bankaccountopeneddate,"YYYY-MM-DD");tab.find("[name=Bankaccountopeneddate]").val(formattedbankaccountopeneddate.format("Do MMM YYYY"))}},populateKYC:function(items,table_name){if(items.length!=0){var table=$(table_name);$.each(items,function(index,item){table.find("select[name=slt_"+item.kycitemid+"]").val(item.actionid).change();item.actiondate&&table.find("input[name=dt_"+item.kycitemid+"]").val(item.actiondate.substr(0,10)).removeAttr("disabled").css("visibility","visible")})}},editAddressBtnFormatter:function(val,row){return["<button class='btn btn-warning btn-icon' ","onclick='utilities.populateAddressFrm("+row.addressid+")'>","<i class='now-ui-icons ui-2_settings-90'>","<\/i><\/button>"].join("")},editPhoneBtnFormatter:function(val,row){return["<button class='btn btn-warning btn-icon' ","onclick='utilities.populatePhoneFrm("+row.phonecontactid+")'>","<i class='now-ui-icons ui-2_settings-90'>","<\/i><\/button>"].join("")},editEmailBtnFormatter:function(val,row){return["<button class='btn btn-warning btn-icon' ","onclick='utilities.populateEmailFrm("+row.emailcontactid+")'>","<i class='now-ui-icons ui-2_settings-90'>","<\/i><\/button>"].join("")},deleteKYCFormatter:function(val,row){return["<button class='btn btn-danger btn-icon' ","onclick='utilities.removeKYCUpload("+row.tracker+")'>","<i class='now-ui-icons ui-1_simple-remove'>","<\/i><\/button>"].join("")},deleteKYCUpdateFormatter:function(val,row){return["<button class='btn btn-danger btn-icon' ","onclick='deleteKYCUpload("+row.id+")'>","<i class='now-ui-icons ui-1_simple-remove'>","<\/i><\/button>"].join("")},viewUploadFormatter:function(val,row){return["<button class='btn btn-info btn-icon' ","onclick='showKYCUpload("+row.id+")'>","<i class='now-ui-icons gestures_tap-01'>","<\/i><\/button>"].join("")},populateAddressFrm:function(addressid){var row=$("#addressUpdateTable").bootstrapTable("getRowByUniqueId",addressid),addressForm=$("#frmAddressUpdate");addressForm.find("[name=addressid]").val(row.addressid);addressForm.find("[name=customerid]").val(row.customerid);addressForm.find("[name=address]").val(row.address);addressForm.find("[name=addresstypeid]").val(row.addresstypeid).change();addressForm.find("[name=city]").val(row.city);addressForm.find("[name=stateid]").val(row.stateid).change();addressForm.find("[name=countryid]").val(row.countryid).change();$("#addressUpdateModal #title").text("Edit Address");$("#frmAddressUpdate #saveBtn").hide();$("#frmAddressUpdate #updateBtn").show();$("#addressUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmAddressUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1})},populatePhoneFrm:function(phoneid){var row=$("#phoneUpdateTable").bootstrapTable("getRowByUniqueId",phoneid),phoneForm=$("#frmPhoneUpdate");phoneForm.find("[name=phonecontactid]").val(row.phonecontactid);phoneForm.find("[name=customerid]").val(row.customerid);phoneForm.find("[name=phone]").val(row.phone);$("#phoneUpdateModal #title").text("Edit Phone");$("#frmPhoneUpdate #saveBtn").hide();$("#frmPhoneUpdate #updateBtn").show();$("#phoneUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmPhoneUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1})},populateEmailFrm:function(emailid){var row=$("#emailUpdateTable").bootstrapTable("getRowByUniqueId",emailid),emailForm=$("#frmEmailUpdate");emailForm.find("[name=emailcontactid]").val(row.emailcontactid);emailForm.find("[name=customerid]").val(row.customerid);emailForm.find("[name=email]").val(row.email);$("#emailUpdateModal #title").text("Edit E-mail");$("#frmEmailUpdate #saveBtn").hide();$("#frmEmailUpdate #updateBtn").show();$("#emailUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmEmailUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1})},showAddressTable:function(){$("#addressUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmAddressUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#addressUpdateModal #title").text("Customer Phone(s)");$("#frmAddressUpdate").trigger("reset")},showPhoneTable:function(){$("#phoneUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmPhoneUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#phoneUpdateModal #title").text("Customer Phone(s)");$("#frmPhoneUpdate").trigger("reset")},showEmailTable:function(){$("#emailUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmEmailUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#emailUpdateModal #title").text("Customer E-mail(s)");$("#frmEmailUpdate").trigger("reset")},updateAddress:function(){var form=$("#frmAddressUpdate");if(!form.valid())return!1;swal({title:"Are you sure?",text:"Customer address will be updated",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#frmAddressUpdate #updateBtn").attr("disabled","true");var form_data,data={};form_data=form.serializeArray();$.each(form_data,function(index,item){data[item.name]=item.value});testDataObject={active:!0,address:"41 AYODELE STREET, MAFOLUKU, OSHODI, LAGOS STATE 14 TIWALADE STREET, SHOGUNLE, OSHODI, LAGOS STATE",addressid:"1014",addresstypeid:"2",city:"LAGOS",countryid:"1",stateid:"25"};data.active=!0;$.ajax(url_path+"/Profile/UpdateCustomerAddress",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(response){swal({title:"Save Customer Address",text:"Customer address saved successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#addressUpdateTable").bootstrapTable("load",response);utilities.showAddressTable();$("#frmAddressUpdate #updateBtn").removeAttr("disabled")})},function(){swal({title:"Update Customer Address",text:"Customer address update encountered an error!",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#frmAddressUpdate #updateBtn").removeAttr("disabled")})})}},function(){return})},updatePhone:function(){var form=$("#frmPhoneUpdate");if(!form.valid())return!1;swal({title:"Are you sure?",text:"Customer phone will be updated",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#frmPhoneUpdate #updateBtn").attr("disabled","true");var form_data,data={};form_data=form.serializeArray();$.each(form_data,function(index,item){data[item.name]=item.value});data.active=!0;$.ajax(url_path+"/Profile/UpdateCustomerPhone",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(response){swal({title:"Save Customer Phone",text:"Customer phone saved successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#phoneUpdateTable").bootstrapTable("load",response);utilities.showPhoneTable();$("#frmPhoneUpdate #updateBtn").removeAttr("disabled")})},function(){swal({title:"Update Customer Phone",text:"Customer phone update encountered an error!",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#frmPhoneUpdate #updateBtn").removeAttr("disabled")})})}},function(){return})},updateEmail:function(){var form=$("#frmEmailUpdate");if(!form.valid())return!1;swal({title:"Are you sure?",text:"Customer email will be updated",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#frmEmailUpdate #updateBtn").attr("disabled","true");var form_data,data={};form_data=form.serializeArray();$.each(form_data,function(index,item){data[item.name]=item.value});data.active=!0;$.ajax(url_path+"/Profile/UpdateCustomerEmail",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(response){swal({title:"Update Customer Email",text:"Customer email updated successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#emailUpdateTable").bootstrapTable("load",response);utilities.showEmailTable();$("#frmEmailUpdate #updateBtn").removeAttr("disabled")})},function(){swal({title:"Update Customer Email",text:"Customer email update encountered an error!",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#frmEmailUpdate #updateBtn").removeAttr("disabled")})})}},function(){return})},addAddress:function(){var form=$("#frmAddressUpdate");if(!form.valid())return!1;swal({title:"Are you sure?",text:"New address will be added",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#frmAddressUpdate #saveBtn").attr("disabled","true");var form_data,data={};form_data=form.serializeArray();$.each(form_data,function(index,item){data[item.name]=item.value});data.active=!0;data.customerid=UpdateCustomer.customerid;delete data.addressid;$.ajax(url_path+"/Profile/AddCustomerAddress",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(response){swal({title:"Create New Address",text:"Customer address created successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#addressUpdateTable").bootstrapTable("load",response);utilities.showAddressTable();$("#frmAddressUpdate #saveBtn").removeAttr("disabled")})},function(){swal({title:"Create New Address",text:"An error occured while processing your request",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#frmAddressUpdate #saveBtn").removeAttr("disabled")})})}},function(){return})},addPhone:function(){var form=$("#frmPhoneUpdate");if(!form.valid())return!1;swal({title:"Are you sure?",text:"New phone will be added",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#frmPhoneUpdate #saveBtn").attr("disabled","true");var form_data,data={};form_data=form.serializeArray();$.each(form_data,function(index,item){data[item.name]=item.value});data.active=!0;data.customerid=UpdateCustomer.customerid;delete data.phonecontactid;$.ajax(url_path+"/Profile/AddCustomerPhone",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(response){swal({title:"Create New Phone",text:"Customer phone number created successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#phoneUpdateTable").bootstrapTable("load",response);utilities.showPhoneTable();$("#frmPhoneUpdate #saveBtn").removeAttr("disabled")})},function(){swal({title:"Create New Phone",text:"An error occured while processing your request",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#frmPhoneUpdate #saveBtn").removeAttr("disabled")})})}},function(){return})},addEmail:function(){var form=$("#frmEmailUpdate");if(!form.valid())return!1;swal({title:"Are you sure?",text:"New email will be added",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){if(isConfirm){$("#frmEmailUpdate #saveBtn").attr("disabled","true");var form_data,data={};form_data=form.serializeArray();$.each(form_data,function(index,item){data[item.name]=item.value});data.active=!0;data.customerid=UpdateCustomer.customerid;delete data.emailcontactid;$.ajax(url_path+"/Profile/AddCustomerEmail",{data:JSON.stringify(data),method:"POST",contentType:"application/json"}).then(function(response){swal({title:"Create New Email",text:"Customer email created successfully!",type:"success",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#emailUpdateTable").bootstrapTable("load",response);utilities.showEmailTable();$("#frmEmailUpdate #saveBtn").removeAttr("disabled")})},function(){swal({title:"Create New Email",text:"An error occured while processing your request",type:"error",allowOutsideClick:!1,allowEscapeKey:!1}).then(function(){$("#frmEmailUpdate #saveBtn").removeAttr("disabled")})})}},function(){return})},showNewAddFrm:function(){$("#frmAddressUpdate").trigger("reset");$("#frmAddressUpdate select").val(null).change();$("#addressUpdateModal #title").text("Add New Address");$("#frmAddressUpdate #saveBtn").show();$("#frmAddressUpdate #updateBtn").hide();$("#addressUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmAddressUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1})},showNewPhoneFrm:function(){$("#frmPhoneUpdate").trigger("reset");$("#phoneUpdateModal #title").text("Add New Phone");$("#frmPhoneUpdate #saveBtn").show();$("#frmPhoneUpdate #updateBtn").hide();$("#phoneUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmPhoneUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1})},showNewEmailFrm:function(){$("#frmEmailUpdate").trigger("reset");$("#emailUpdateModal #title").text("Add New E-mail");$("#frmEmailUpdate #saveBtn").show();$("#frmEmailUpdate #updateBtn").hide();$("#emailUpdateTable").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1});$("#frmEmailUpdate").closest("div.row").slideToggle({duration:utilities.animDuration,queue:!1})}};