function initSelectTwoConfig(){$.fn.select2.defaults.set("theme","bootstrap4");$.fn.select2.defaults.set("dropdownParent",$(".card-body").first());$.fn.select2.defaults.set("width","100%");$.fn.select2.defaults.set("allowClear",!0);$("#InputType").select2({placeholder:"Select input type",data:[{id:"1",text:"Text"},{id:"2",text:"Checkbox"},{id:"3",text:"date"},{id:"4",text:"file"},{id:"5",text:"radio"},{id:"6",text:"Select"}]})}function initDataTable(){$("#data-table").bootstrapTable("showLoading");$("#data-table").bootstrapTable({search:!0,searchAlign:"right",detailView:!0,detailFormatter:utilities.optionsDetailTableFormatter,url:"../Setup/ListCustomFields",showPaginationSwitch:!0,pagination:!0,mobileResponsive:!0,checkOnInit:!0,minWidth:626,toolbar:"#custom-toolbar",showRefresh:!0,showToggle:!0,uniqueId:"id",buttonsClass:"danger",columns:[{field:"inputName",title:"Input Name",sortable:!0},{field:"inputLabel",title:"Input Label",sortable:!0},{field:"inputTypeId",title:"Input Type",sortable:!0,formatter:utilities.inputTypeFormatter},{field:null,align:"center",width:"5%",formatter:utilities.deleteFormatter},]})}function initFormValidations(){jQuery.validator.setDefaults({onfocusout:!1,onkeyup:!1,onclick:!1,normalizer:function(value){return $.trim(value)},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})}});$("#custom-input").each(function(){$(this).validate({messages:{inputname:{required:"Input name is required"},inputlabel:{required:"Input Label is required"},InputType:{required:"Please Select Input Type"}}})})}var url_path=window.location.pathname,inputTypeId,allCustomFields,utilities;url_path.charAt(url_path.length-1)=="/"&&(url_path=url_path.slice(0,url_path.length-1)),function($){function addFieldset(options){var testVariable,siblings,fieldsetEls,fieldsetElsLen,clone,db,count,i,newClone;if(inputTypeId==5?(options.numTimes=1,options.maxFields=2):(options.numTimes=1,options.maxFields=!1),console.log(options.maxFields),testVariable=$("#fieldsetracker").prevAll(),console.log(testVariable),siblings=[],jQuery.each($("#fieldsetracker").prevAll(),function(){if(this.tagName=="FIELDSET")siblings.unshift($(this));else return siblings}),fieldsetEls=siblings,fieldsetElsLen=fieldsetEls.length,!options.maxFields||fieldsetElsLen+options.numTimes<=options.maxFields)for(clone=fieldsetEls[0].clone(),db=getDeleteButtonObj(options),db.click(function(){var parent=$(this).parent("fieldset");return parent.fadeOut(options.fadeDuration,function(){$(this).remove()}),!1}),db.appendTo(clone),clone.find(":input").each(function(){var type=this.type,tag=this.tagName.toLowerCase();type=="text"||type=="password"||tag=="textarea"?this.value="":type=="checkbox"||type=="radio"?this.checked=!1:tag=="select"&&(this.selectedIndex=-1)}),count=1,jQuery.each(fieldsetEls,function(){this.find(":input").each(function(){renameField(this,"id",count);renameField(this,"name",count)});count++}),i=count;i<options.numTimes+count;i++)newClone=clone.clone(!0),newClone.find(":input").each(function(){renameField(this,"id",i);renameField(this,"name",i)}),newClone.insertBefore("#fieldsetracker");else alert(options.maxFieldsMsg)}function renameField(obj,attr,num){var a=$(obj).attr(attr).split(/_[0-9]*$/i)[0];$(obj).attr(attr,a+"_"+num)}function getDeleteButtonObj(options){var html='<div class="'+options.deleteButtonDiv+'"><input type="button"value="'+options.deleteButtonValue+'" class="'+options.deleteButtonClass+'" id="delete" name="delete" /><\/div>';return $(html)}$.fn.dynamicForm=function(options){var opts=$.extend({},$.fn.dynamicForm.defaults,options);return this.each(function(){$this=$(this);var o=$.meta?$.extend({},opts,$this.data()):opts;$(this).click(function(){addFieldset(o,$(this))})})};$.fn.dynamicForm.defaults={numTimes:1,maxFields:!1,maxFieldsMsg:"You have reached the maximum number of fields allowed",fadeDuration:"slow",deleteButtonDiv:"form-group",deleteButtonClass:"btn btn-danger btn-next btn-wd",deleteButtonValue:"Delete This Option Field"}}(jQuery);$(document).ready(function(){initDataTable();initSelectTwoConfig();initFormValidations();$("#addButton1").dynamicForm({deleteButtonDiv:"form-group",deleteButtonClass:"btn btn-danger btn-next btn-wd",deleteButtonValue:"Delete This Option Field",maxFields:!1,numTimes:1,fadeDuration:"slow"})});$("#InputType").on("select2:select",function(e){var inputid,value;inputid=e.params.data.id;console.log(inputid);inputTypeId=inputid;$("#custom-input").find("[name=extrainput]").val("");value=$("fieldset").nextAll("#form-group").length;$("fieldset").nextAll("#form-group").remove();inputid==2?($("#selectinputconfigure").show(),$("#selectinputconfigureaddbutton").show()):inputid==5?($("#selectinputconfigure").show(),$("#selectinputconfigureaddbutton").show()):inputid==6?($("#selectinputconfigure").show(),$("#selectinputconfigureaddbutton").show()):($("#selectinputconfigure").hide(),$("#selectinputconfigureaddbutton").hide())});$("#submit").click(function(event){var form,frmInputValue;if(event.preventDefault(),form=$("#custom-input"),!form.valid())return!1;console.log(form);frmInputValue=$(form).serializeArray();console.log(frmInputValue);swal({title:"Are you sure?",text:"Custom Field Will be added",type:"warning",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){isConfirm&&$.ajax({url:"../Setup/AddCustomField",type:"POST",data:JSON.stringify(frmInputValue),dataType:"json",contentType:"application/json; charset=utf-8",success:function(result){result.toString!==""&&result!==null?(swal({title:"Customer Custom Field",text:"Custom Field Type added successfully!",type:"success"}).then(function(){}),$("#data-table").bootstrapTable("refresh",{url:"Setup/ListCustomFields"}),$("fieldset").nextAll("#form-group").remove(),$("#selectinputconfigure").hide(),$("#selectinputconfigureaddbutton").hide(),$("#custom-input")[0].reset(),$("#InputType").val("").trigger("change")):(swal({title:"Customer Custom Field",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){}),$("#submit").removeAttr("disabled"))},error:function(){swal({title:"Customer Custom Field",text:"Customer Custom Field encountered an error",type:"error"}).then(function(){})}})},function(){swal({title:"Cancel Customer Custom Field",text:"Customer Custom Field Addition was Cancelled!",type:"error"});return})});utilities={optionsDetailTableFormatter:function(index,row,detail){detail.html("Loading...");var mandates;$.when($.ajax("../Setup/LoadCustomFieldOptions/"+row.id).then(function(response){mandates=response;console.log(mandates)})).then(function(){var top_row=$("<div class='row'><\/div>"),bottom_row=$("<div class='row'><\/div>"),bvn_col=$("<div class='col-sm-12 col-md-6'><\/div>"),phone_col=$("<div class='col-sm-12 col-md-6'><\/div>"),email_col=$("<div class='col-sm-12 col-md-6'><\/div>"),mandates_col;mandates.length==0||mandates==!1?(mandates_col=$("<div class='col-sm-12 col-md-6'><\/div>"),mandates_col.append("<p>No Record Available.<\/p>"),bottom_row.append(mandates_col)):$.each(mandates,function(index,value){var mandates_col=$("<div class='col-sm-12 col-md-6'><\/div>");mandates_col.append("<p>&nbsp;<\/p>");mandates_col.append("<h6 class='detail-primary d-inline-block mb-3'>"+value.optionName+"<\/h6>");mandates_col.append("<p>&nbsp;<\/p>");bottom_row.append(mandates_col)});detail.empty();detail.append(top_row,bottom_row)})},editMandateBtnFormatter:function(val,row){return mandateRowObject=row,"<button class='btn btn-warning btn-icon' onclick='utilities.populateMandateFrm()'><i class='now-ui-icons ui-2_settings-90'><\/i><\/button>"},inputTypeFormatter:function(value){var name=null;if(value==1)name="Text";else if(value==2)name="CheckBox";else if(value==3)name="Date";else if(value==4)name="File";else if(value==5)name="Radio";else if(value==6)name="Select";else if(!name)return"-";return name},editFormatter:function(){return'<button type="button" class="edit btn btn-sm btn-warning" title="Edit" ><i class="now-ui-icons ui-2_settings-90"><\/i><\/button>'},deleteFormatter:function(value,row){return['<button type="button" class="remove btn btn-sm btn-danger" title="Delete" id="'+row.id+'" onclick="utilities.deleteCustomInput(this)">','<i class="now-ui-icons ui-1_simple-remove"><\/i> ',"<\/button>"].join("")},deleteCustomInput:function(self){var customInputId=$("#data-table").bootstrapTable("getRowByUniqueId",self.id);console.log(customInputId);swal({title:"Are you sure?",text:"Custom Field Will be deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(isConfirm){isConfirm&&$.ajax({url:"../Setup/DeleteCustomField",type:"POST",data:JSON.stringify(customInputId),dataType:"json",contentType:"application/json; charset=utf-8",success:function(result){result.toString!==""&&result!==null?(swal({title:"Customer Custom Field",text:"Custom Field deleted successfully!",type:"success"}).then(function(){}),$("#data-table").bootstrapTable("refresh",{url:"Setup/ListCustomFields"})):(swal({title:"Customer Custom Field",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){}),$("#submit").removeAttr("disabled"))},error:function(){swal({title:"Customer Custom Field",text:"Customer Custom Field Deletion encountered an error",type:"error"}).then(function(){})}})},function(){swal({title:"Cancel Customer Custom Field",text:"Customer Custom Field Deletion was Cancelled!",type:"error"});return})}};