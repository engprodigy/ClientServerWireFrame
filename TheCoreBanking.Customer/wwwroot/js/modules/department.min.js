function departmentFormatter(){return'<a class="edit btn btn-sm"  title="Edit Department"><i class="now-ui-icons ui-2_settings-90"><\/i> <\/a><a class="edit btn btn-sm" onclick="delete"  title="Delete Department"><i class="now-ui-icons ui-2_settings-90"><\/i> <\/a>'}function reloadpage(){location.reload()}function clear(){$("#Id").val("");$("#CoyId").val("");$("#BranchId").val("");$("#Department").val("");$("#DeptCode").val("");$("#UnitCode").val("");$("#UnitName").val("")}function updateDepartment(){var json_data={};json_data.Id=$("#Id").val();json_data.coyId=$("#CoyId").val();json_data.branchId=$("#BranchId").val();json_data.department=$("#Department").val();json_data.deptCode=$("#DeptCode").val();json_data.unitCode=$("#UnitCode").val();json_data.unitName=$("#UnitName").val();$("input[type=submit]").attr("disabled","disabled");$("#frmDepartment").validate({messages:{CoyId:{required:"Company Code is required"},UnitName:{required:"Unit Name is required"},BranchId:{required:"Branch Code is required"},Department:{required:"Department is required"},DeptCode:{required:"Department Code is required"},UnitCode:{required:"Unit Code is required"}},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},submitHandler:function(){swal({title:"Are you sure?",text:"Department will be Added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){isConfirm&&($("#btnDepartment").attr("disabled","disabled"),$.ajax({url:"CompanySetup/AddDepartment",type:"POST",data:json_data,dataType:"json",success:function(result){alert(result);result.toString!=""&&result!=null?(swal({title:"Create Department",text:"Department added successfully!",type:"success"}).then(function(){clear()}),$("#departmentTable").bootstrapTable("refresh",{url:"CompanySetup/listdepartment"}),$("#btnDepartment").removeAttr("disabled")):(swal({title:"Create Department",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clear()}),$("#btnDepartment").removeAttr("disabled"))},error:function(){swal({title:"Create Department",text:"Create Department encountered an error",type:"error"}).then(function(){clear()});$("#btnDepartment").removeAttr("disabled")}}))})}},function(){swal("Create Department","You cancelled Department creation.","error");$("#btnDepartment").removeAttr("disabled")})}window.departmentEvents={"click .edit":function(e,value,row){if(row.state=!0){var data=JSON.stringify(row);$("#Id").val(row.Id);$("#CoyId").val(row.coyId);$("#BranchId").val(row.branchId);$("#Department").val(row.department);$("#DeptCode").val(row.deptCode);$("#UnitCode").val(row.unitCode);$("#UnitName").val(row.unitName);$("#AddNewDepartment").modal("show");$("#btnDepartment").html('  <i class="now-ui-icons ui-1_check"><\/i> Update Record')}}};$(document).ready(function($){$("#btnDepartment").on("click",function(){updateDepartment()})});